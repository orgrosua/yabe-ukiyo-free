import{e as _,G as h,x as y,o as l,c,b as t,h as v,A as g,d as r,k}from"./app-Ce5S3xnu.js";import{c as b}from"./cloneDeep-Dnkf_cep.js";import{b as x,u as w,a as B}from"./notifier-CN7pR-B_.js";import"./isObjectLike-mqpIr8Ea.js";const N={key:0,class:"tw-mb-6"},T={class:"form-table",role:"presentation"},V=t("th",{scope:"row"},[t("label",null,"License Key")],-1),E={key:0,class:"flex my:10 align-items:center font:medium"},G=t("span",{class:"font:regular fg:white bg:#15803d px:6 py:4 r:4 ml:10"},"active",-1),S={key:1,class:"description"},q=t("a",{href:"https://ukiyo.yabe.land/#pricing-plans",target:"_blank"},"license key",-1),j={__name:"General",setup(A){const u=x(),i=w(),o=B(),n=_({key:null,is_activated:!1,opt_in_pre_release:!1});return h(()=>{i.add("settings:fetch-license"),u.request({method:"GET",url:"/admin/settings/license/index"}).then(s=>s.data).then(s=>{n.value=s.license}).catch(function(s){o.alert(s.message)}).finally(()=>{i.remove("settings:fetch-license")})}),y(()=>n.value.key,async(s,a)=>{i.isBusy||s!==a&&(i.add("settings:store-license"),u.request({method:"POST",url:"/admin/settings/license/store",data:{license:s}}).then(e=>e.data).then(e=>{var d,m,f,p;n.value=b(e.license),Object.keys(e.notice).length>0?(d=e.notice)!=null&&d.success?o.success((m=e.notice)==null?void 0:m.success):(f=e.notice)!=null&&f.error&&o.alert((p=e.notice)==null?void 0:p.error):o.success("License setting saved.")}).catch(function(e){o.alert(e.message)}).finally(()=>{i.remove("settings:store-license")}))}),(s,a)=>s.ukiyo.lite_edition?k("",!0):(l(),c("div",N,[t("table",T,[t("tbody",null,[t("tr",null,[V,t("td",null,[v(t("input",{name:"license_key",type:"password","onUpdate:modelValue":a[0]||(a[0]=e=>n.value.key=e),class:"min-w:25rem"},null,512),[[g,n.value.key,void 0,{lazy:!0}]]),n.value.is_activated?(l(),c("div",E,[r(" Status: "),G])):(l(),c("p",S,[r("Enter your "),q,r(" receive the update of the latest version.")]))])])])])]))}};export{j as default};
