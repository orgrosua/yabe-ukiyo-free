import{s as w,g as r}from"./get-D6nU50df.js";import{u as N}from"./setting-BqinFiiq.js";import{N as B,e as M,r as u,z as V,o as a,c as l,b as e,t as i,u as n,h as p,a as m,d as y,g as C,k as S,w as A,n as D,I as K}from"./app-DmP38fiz.js";import{a as G,b as I,u as R}from"./notifier-oDSeFarO.js";import"./cloneDeep-Dnkf_cep.js";import"./isObjectLike-mqpIr8Ea.js";import"./isSymbol-BpHlYMiq.js";const U={key:0,class:"form-table",role:"presentation"},q={scope:"row"},E={for:"enable_centralized"},F={class:""},O=["checked","value"],P={for:"enable_centralized"},Y={class:"description"},j={class:"flex pt:16"},H=["disabled"],J=e("span",{class:"text"},"Copy Token",-1),L=e("p",{class:"description"}," Copy the Token to fill the fields automatically on the Central Managemenent site. ",-1),Q={scope:"row"},W=e("span",{class:"fg:red-35"},"*",-1),X={class:"flex"},Z={class:"rel flex mr:8 align-items:center"},ee=["type","value"],te=e("span",{class:"text"},"Generate",-1),ne={class:"description"},ae={key:1,class:"my:20"},se={key:0,class:"inline-block mr:8"},oe={key:1,class:"inline-block mr:8"},le=e("div",{class:"clear"},null,-1),ye={__name:"CentralManagement",setup(ie){const f=N(),{setting:s}=B(f),h=G();I(),R();const c=M(!1);function $(){w(s.value,"central_management.secret_key",K()),b()}function b(){f.doPush()}function x(){var o;const t=btoa(`${ukiyo.rest_api.url}
${ukiyo.site_meta.name}
${(o=s.value.central_management)==null?void 0:o.secret_key}`);navigator.clipboard.writeText(t).then(()=>{h.success("Token copied to clipboard")},()=>{h.error("Failed to copy the Token to clipboard")})}return(t,o)=>{const d=u("font-awesome-icon"),T=u("router-link"),z=u("router-view"),_=V("ripple");return a(),l("div",null,[t.$route.name=="settings.central_management.index"?(a(),l("table",U,[e("tbody",null,[e("tr",null,[e("th",q,[e("label",E,i(t.__("Open Access","yabe-ukiyo")),1)]),e("td",null,[e("div",F,[e("input",{type:"checkbox",name:"enable_centralized",id:"enable_centralized",checked:n(r)(n(s),"central_management.enabled",!1),value:n(r)(n(s),"central_management.enabled",!1),onInput:o[0]||(o[0]=g=>{var k,v;return n(w)(n(s),"central_management.enabled",!((v=(k=n(s))==null?void 0:k.central_management)!=null&&v.enabled))}),class:"mr:8"},null,40,O),e("label",P,i(t.__("Allow other site to manage the Yabe Ukiyo of this site.","yabe-ukiyo")),1)]),e("p",Y,i(t.__("Useful if you have an e-commerce site and multiple remote templates that need to be managed from a central location.","yabe-ukiyo")),1),e("div",j,[p((a(),l("button",{type:"button",onClick:o[1]||(o[1]=g=>x()),class:"button flex align-items:center",disabled:!n(r)(n(s),"central_management.enabled",!1)||!n(r)(n(s),"central_management.secret_key","")},[m(d,{icon:["far","clipboard"],class:"font:15 mr:6"}),J],8,H)),[[_]])]),L])]),e("tr",null,[e("th",Q,[e("label",null,[y(i(t.__("Secret Key","yabe-ukiyo"))+" ",1),W])]),e("td",null,[e("div",X,[e("div",Z,[e("input",{type:c.value?"text":"password",name:"secret_license_key",value:n(r)(n(s),"central_management.secret_key",""),autocomplete:"current-password",class:"min-w:300 hide::-ms-reveal",required:"",readonly:""},null,8,ee),e("span",{onClick:o[2]||(o[2]=g=>c.value=!c.value),class:"flex align-items:center ml:-24 fg:gray-60 fg:gray-40:hover cursor:pointer"},[c.value?(a(),C(d,{key:1,icon:["fas","eye-slash"],class:"font:15"})):(a(),C(d,{key:0,icon:["fas","eye"],class:"font:15"}))])]),p((a(),l("div",{onClick:$,class:"button flex align-items:center"},[m(d,{icon:["fas","shuffle"],class:"font:15 mr:6"}),te])),[[_]])]),e("p",ne,i(t.__("The secret key is used to authenticate the connection between this site and the central management site.","yabe-ukiyo")),1)])])])])):S("",!0),t.$route.name=="settings.central_management.index"?(a(),l("div",ae,[p((a(),l("button",{type:"button",onClick:b,class:"button button-primary r:4 cursor:pointer"},[y("Save Changes")])),[[_]])])):S("",!0),e("div",{class:D([{"mt:20":t.$route.name!="settings.central_management.index"},"wrap m:0"])},[t.$route.name=="settings.central_management.index"?(a(),l("h2",se,i(t.__("Managed Sites","yabe-ukiyo")),1)):(a(),l("h2",oe,[m(T,{to:{name:"settings.central_management"},class:"text-decoration-line:none"},{default:A(()=>[y(i(t.__("Managed Sites","yabe-ukiyo")),1)]),_:1},8,["to"])])),m(z),le],2)])}}};export{ye as default};
