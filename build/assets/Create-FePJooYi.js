import{m as z,E as F,e as i,f as M,x as A,G,r as K,o as w,c as R,b as e,t as r,u as a,d as b,h as y,A as k,H as j,g as B,a as u,w as _,F as I,I as N,D as c,n as f,J as P}from"./app-DmP38fiz.js";import{d as X}from"./debounce-XxfNuXcX.js";import{b as H,a as J,u as O}from"./notifier-oDSeFarO.js";import{u as W,a as Q,o as Y}from"./switch-DdjbC4Z_.js";import"./isObjectLike-mqpIr8Ea.js";import"./isSymbol-BpHlYMiq.js";const Z={class:"mr:8 font:24"},ee={class:"form-table",role:"presentation"},te={scope:"row"},se=e("span",{class:"fg:red-35"},"*",-1),ae={scope:"row"},oe=e("span",{class:"fg:red-35"},"*",-1),ne={class:"flex"},le={class:"rel flex mr:8 align-items:center"},ie=["type"],re=e("span",{class:"text"},"Generate",-1),ue=e("p",{class:"description"},' This value is compatible and can be used to fill the "Remote Templates Password" field. ',-1),ce={scope:"row"},de={scope:"row"},pe={class:"flex"},fe={scope:"row"},me={class:"flex"},ve={scope:"row"},be={class:"flex"},ye=["disabled"],Ve={__name:"Create",setup(_e){const S=H(),T=z(),V=J(),h=O(),D=F(),d=i(""),m=i(""),l=i(!0),g=i(null),p=i(null),x=i(null),v=i(!0),U=i([]),E=M(()=>U.value.map(n=>({label:`${n.name} (${n.email})`,value:parseInt(n.id)}))),L=X((n,t)=>{n&&(t(!0),S.request({method:"GET",url:"/admin/licenses/search_user",params:{s:n}}).then(o=>{U.value=o.data.data}).catch(o=>{V.error(o)}).finally(()=>{t(!1)}))},200);A(p,(n,t)=>{n===""&&(p.value=null)});function C(){m.value="",d.value=N(),l.value=!0}G(()=>{C()});function $(n){var o;n.preventDefault(),h.add("license.create:send-form");let t=S.request({method:"POST",url:"/admin/licenses/store",data:{title:m.value,license_key:d.value,status:l.value,max_sites:g.value,expired_at:p.value,user_id:(o=x.value)==null?void 0:o.value}}).then(s=>{const q=T.resolve({name:"licenses.edit",params:{id:s.data.id}}).href;D.add({type:"success",message:`<p>License saved successfully. <a href="${q}">Edit License</a></p>`}),C()}).finally(()=>{h.remove("license.create:send-form")});V.async(t,"License stored successfully.",void 0,"Storing license...")}return(n,t)=>{const o=K("font-awesome-icon");return w(),R(I,null,[e("span",Z,"Â» "+r(a(c)("New","yabe-ukiyo")),1),e("form",{onSubmit:$},[e("div",null,[e("table",ee,[e("tbody",null,[e("tr",null,[e("th",te,[e("label",null,[b(r(a(c)("Title","yabe-ukiyo"))+" ",1),se])]),e("td",null,[y(e("input",{type:"text",name:"title","onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),required:""},null,512),[[k,m.value,void 0,{trim:!0,lazy:!0}]])])]),e("tr",null,[e("th",ae,[e("label",null,[b(r(a(c)("License Key","yabe-ukiyo"))+" ",1),oe])]),e("td",null,[e("div",ne,[e("div",le,[y(e("input",{type:v.value?"text":"password",name:"secret_license_key","onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),autocomplete:"current-password",class:"min-w:300 hide::-ms-reveal",required:""},null,8,ie),[[j,d.value]]),e("span",{onClick:t[2]||(t[2]=s=>v.value=!v.value),class:"flex align-items:center ml:-24 fg:gray-60 fg:gray-40:hover cursor:pointer"},[v.value?(w(),B(o,{key:1,icon:["fas","eye-slash"],class:"font:15"})):(w(),B(o,{key:0,icon:["fas","eye"],class:"font:15"}))])]),e("div",{onClick:t[3]||(t[3]=s=>d.value=a(N)()),class:"button flex align-items:center"},[u(o,{icon:["fas","shuffle"],class:"font:15 mr:6"}),re])]),ue])]),e("tr",null,[e("th",ce,[e("label",null,r(a(c)("Status","yabe-ukiyo")),1)]),e("td",null,[u(a(Y),{as:"div",class:"flex align-items:center"},{default:_(()=>[u(a(W),{modelValue:l.value,"onUpdate:modelValue":t[4]||(t[4]=s=>l.value=s),class:f([[l.value?"bg:sky-60":"opacity:.5 bg:gray-20"],"rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent transition-property:color,background-color,border-color,text-decoration-color,fill,stroke transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|2,rgb(14,165,233)|0|0|0|4,rgba(0,0,0,0)|0|0|0|0:focus outline:2|solid|transparent:focus"])},{default:_(()=>[e("span",{class:f([[l.value?"translateX(20)":"translateX(0)"],"pointer-events:none rel inline-block font:12 h:20 w:20 rounded bg:white transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|0,rgba(59,130,246,0.5)|0|0|0|0,rgba(0,0,0,0.1)|0|1|3|0,rgba(0,0,0,0.1)|0|1|2|-1"])},[e("span",{"aria-hidden":"true",class:f([[l.value?"opacity:0 transition-timing-function:ease-out transition-duration:100":"opacity:1 transition-timing-function:ease-in transition-duration:200"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[u(o,{icon:["fas","xmark"],class:"fg:gray-60"})],2),e("span",{"aria-hidden":"true",class:f([[l.value?"opacity:1 transition-timing-function:ease-in transition-duration:200":"opacity:0 transition-timing-function:ease-out transition-duration:100"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[u(o,{icon:["fas","check"],class:"fg:sky-60"})],2)],2)]),_:1},8,["modelValue","class"]),u(a(Q),{as:"span",class:f([[l.value?"fg:black":"fg:gray-60"],"ml:8 font:medium tw-cursor-pointer"])},{default:_(()=>[b(r(l.value?"enabled":"disabled"),1)]),_:1},8,["class"])]),_:1})])]),e("tr",null,[e("th",de,[e("label",null,r(a(c)("Max activations","yabe-ukiyo")),1)]),e("td",null,[e("div",pe,[y(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>g.value=s),min:"0"},null,512),[[k,g.value]])])])]),e("tr",null,[e("th",fe,[e("label",null,r(a(c)("Expired at","yabe-ukiyo")),1)]),e("td",null,[e("div",me,[y(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=s=>p.value=s)},null,512),[[k,p.value]])])])]),e("tr",null,[e("th",ve,[e("label",null,r(a(c)("User","yabe-ukiyo")),1)]),e("td",null,[e("div",be,[u(a(P),{modelValue:x.value,"onUpdate:modelValue":t[7]||(t[7]=s=>x.value=s),options:E.value,onSearch:a(L),filterable:!1,placeholder:"Choose user",class:"min-w:300"},{"no-options":_(()=>[b(" Search for a user... ")]),_:1},8,["modelValue","options","onSearch"])])])])])]),e("button",{type:"submit",name:"save",id:"save",disabled:a(h).isBusy,class:"button button-primary button-large",value:"save"},"Save",8,ye)])],32)],64)}}};export{Ve as default};
