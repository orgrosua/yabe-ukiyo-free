import{l as M,m as A,e as u,x as V,G as L,r as $,o as f,c as _,b as e,t as r,u as n,d as p,h as k,A as B,a as m,F,n as d,k as j,H as q,g as N,w,D as l}from"./app-Ce5S3xnu.js";import{d as E}from"./debounce-XxfNuXcX.js";import{b as G,a as X,u as Y}from"./notifier-CN7pR-B_.js";import{u as H,a as I,o as O}from"./switch-CMK24Cj1.js";import"./isObjectLike-mqpIr8Ea.js";import"./isSymbol-BpHlYMiq.js";const P={class:"mr:8 font:24"},J={class:"form-table",role:"presentation"},Q={scope:"row"},W=e("span",{class:"fg:red-35"},"*",-1),Z={scope:"row"},ee=e("span",{class:"fg:red-35"},"*",-1),te={key:0,class:"description"},se={key:0},oe={class:"font:semibold"},ae=e("br",null,null,-1),ne=e("span",{class:"font:semibold"},"Bricks: ",-1),le=e("br",null,null,-1),ie=e("span",{class:"font:semibold"},"Yabe Ukiyo: ",-1),re={scope:"row"},ce=e("span",{class:"fg:red-35"},"*",-1),ue={class:"flex"},de={class:"rel flex mr:8 align-items:center"},fe=["type"],me=e("p",{class:"description"},' You also can use the "My Templates Access" password provided by the remote site here. ',-1),ye={scope:"row"},we={__name:"Show",setup(pe){const x=G(),R=M(),S=A(),D=X(),U=Y(),T=u({}),b=u(!0),z=u(""),v=u(""),g=u(""),c=u(!0),y=u(""),C=u(null),h={status:null,connected:!1,yabeUkiyoDetected:!1,bricksDetected:!1},o=u({...h});V(z,(t,s)=>{if(!(t===""||t===s))try{const a=atob(t).split(`
`);a.length===3&&(y.value=a[0],g.value=a[1],v.value=a[2])}catch{}}),V(y,E((t,s)=>{t!==s&&(o.value={...h},t!==""&&C.value.checkValidity()&&(o.value.status="loading",x.request({method:"POST",url:"/admin/remotes/check-connection",data:{remote_url:t.trim().replace(/\/$/,"")}}).then(a=>{a.status===200?(o.value={...o.value,status:!0,connected:!0},o.value.yabeUkiyoDetected=a.data.namespaces.find(i=>i==="yabe-ukiyo/v1")!==void 0,o.value.bricksDetected=a.data.namespaces.find(i=>i==="bricks/v1")!==void 0):o.value.status=!1}).catch(a=>{o.value={...h,status:!1}})))},100));async function K(){return U.add("remotes.edit:fetch-item"),x.request({method:"GET",url:`/admin/remotes/detail/${R.params.id}`}).then(t=>t.data).then(t=>{v.value=t.license_key,g.value=t.title,c.value=t.status,y.value=t.remote_url,T.value=t}).finally(()=>{U.remove("remotes.edit:fetch-item")})}return L(()=>{let t=K();D.async(t,"Remote details loaded.",s=>{D.alert(s.response&&s.response.status===404?"Remote not found.":"Failed to load remote details."),S.go(-1)},"Fetching remote details...")}),(t,s)=>{const a=$("font-awesome-icon");return f(),_(F,null,[e("span",P,"Â» "+r(n(l)("Detail","yabe-ukiyo")),1),e("div",null,[e("table",J,[e("tbody",null,[e("tr",null,[e("th",Q,[e("label",null,[p(r(n(l)("Title","yabe-ukiyo"))+" ",1),W])]),e("td",null,[k(e("input",{type:"text",name:"title","onUpdate:modelValue":s[0]||(s[0]=i=>g.value=i),readonly:""},null,512),[[B,g.value,void 0,{trim:!0,lazy:!0}]])])]),e("tr",null,[e("th",Z,[e("label",null,[p(r(n(l)("Remote URL","yabe-ukiyo"))+" ",1),ee])]),e("td",null,[k(e("input",{type:"url",ref_key:"remoteUrlField",ref:C,name:"remote_url","onUpdate:modelValue":s[1]||(s[1]=i=>y.value=i),readonly:""},null,512),[[B,y.value,void 0,{trim:!0,lazy:!0}]]),o.value.status!==null?(f(),_("p",te,[o.value.status==="loading"?(f(),_("span",se,[m(a,{icon:["fas","spinner"],class:"mr:4 fg:gray-60 animation:rotate|linear|1s|infinite"}),p(" "+r(n(l)("Connecting","yabe-ukiyo"))+"... ",1)])):(f(),_(F,{key:1},[e("span",oe,r(n(l)("Server","yabe-ukiyo"))+": ",1),e("span",{class:d(o.value.connected?"fg:green-50":"fg:red-40")},r(o.value.connected?n(l)("Connected","yabe-ukiyo"):n(l)("Failed to connect","yabe-ukiyo")),3),ae,ne,e("span",{class:d(o.value.bricksDetected?"fg:green-50":"fg:red-40")},r(o.value.bricksDetected?n(l)("Detected","yabe-ukiyo"):n(l)("Not detected","yabe-ukiyo")),3),le,ie,e("span",{class:d(o.value.yabeUkiyoDetected?"fg:green-50":"fg:yellow-60")},r(o.value.yabeUkiyoDetected?n(l)("Detected","yabe-ukiyo"):n(l)("Not detected","yabe-ukiyo")),3)],64))])):j("",!0)])]),e("tr",null,[e("th",re,[e("label",null,[p(r(n(l)("License Key","yabe-ukiyo"))+" ",1),ce])]),e("td",null,[e("div",ue,[e("div",de,[k(e("input",{type:b.value?"text":"password",name:"secret_license_key","onUpdate:modelValue":s[2]||(s[2]=i=>v.value=i),autocomplete:"current-password",class:"min-w:300 hide::-ms-reveal",readonly:""},null,8,fe),[[q,v.value]]),e("span",{onClick:s[3]||(s[3]=i=>b.value=!b.value),class:"flex align-items:center ml:-24 fg:gray-60 fg:gray-40:hover cursor:pointer"},[b.value?(f(),N(a,{key:1,icon:["fas","eye-slash"],class:"font:15"})):(f(),N(a,{key:0,icon:["fas","eye"],class:"font:15"}))])])]),me])]),e("tr",null,[e("th",ye,[e("label",null,r(n(l)("Status","yabe-ukiyo")),1)]),e("td",null,[m(n(O),{as:"div",class:"flex align-items:center"},{default:w(()=>[m(n(H),{modelValue:c.value,"onUpdate:modelValue":s[4]||(s[4]=i=>c.value=i),"aria-disabled":"true",class:d([[c.value?"bg:sky-60":"opacity:.5 bg:gray-20"],"rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent transition-property:color,background-color,border-color,text-decoration-color,fill,stroke transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|2,rgb(14,165,233)|0|0|0|4,rgba(0,0,0,0)|0|0|0|0:focus outline:2|solid|transparent:focus"])},{default:w(()=>[e("span",{class:d([[c.value?"translateX(20)":"translateX(0)"],"pointer-events:none rel inline-block font:12 h:20 w:20 rounded bg:white transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|0,rgba(59,130,246,0.5)|0|0|0|0,rgba(0,0,0,0.1)|0|1|3|0,rgba(0,0,0,0.1)|0|1|2|-1"])},[e("span",{"aria-hidden":"true",class:d([[c.value?"opacity:0 transition-timing-function:ease-out transition-duration:100":"opacity:1 transition-timing-function:ease-in transition-duration:200"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[m(a,{icon:["fas","xmark"],class:"fg:gray-60"})],2),e("span",{"aria-hidden":"true",class:d([[c.value?"opacity:1 transition-timing-function:ease-in transition-duration:200":"opacity:0 transition-timing-function:ease-out transition-duration:100"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[m(a,{icon:["fas","check"],class:"fg:sky-60"})],2)],2)]),_:1},8,["modelValue","class"]),m(n(I),{as:"span",class:d([[c.value?"fg:black":"fg:gray-60"],"ml:8 font:medium tw-cursor-pointer"])},{default:w(()=>[p(r(c.value?"enabled":"disabled"),1)]),_:1},8,["class"])]),_:1})])])])])])],64)}}};export{we as default};
